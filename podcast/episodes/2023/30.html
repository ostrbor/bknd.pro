<html lang="ru" xmlns="http://www.w3.org/1999/html">
<head>
    <title>Backend Podcast: 30. Резульатыт опроса Go разработчиков, CGO-пакеты</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/modern-normalize@2.0.0/modern-normalize.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="../../css/css.css" rel="stylesheet">
</head>
<body>
<div class="container">
    <div id="other-platforms">
        <a href="https://feeds.acast.com/public/shows/64727c07e689970012fb1c23">RSS</a>
        <a href="https://t.me/bkndpro">Telegram</a>
        <a href="https://www.youtube.com/@ostrbor/videos">YouTube</a>
        <a href="https://podcasts.apple.com/us/podcast/backend-podcast/id1732130106">Apple</a>
        <a href="https://music.yandex.ru/album/28370806">Яндекс</a>
        <a href="https://open.spotify.com/show/6G9K0DrOH2wsEqDKbed01e?si=oQXKuI4tQKqgJj894-2p_A">Spotify</a>
        <a href="https://music.amazon.com/podcasts/d797927c-7c90-4d4b-a845-3b61dc25060c/backend-podcast">Amazon</a>
        <a href="mailto:OstretsovAA+podcast@gmail.com">Почта</a>
    </div>
    <hgroup>
        <h1>30. Резульатыт опроса Go разработчиков, CGO-пакеты</h1>
        <h2>17.12.2023</h2>
    </hgroup>

    <p>
        <iframe src="https://embed.acast.com/64727c07e689970012fb1c23/657f22c0d39db400167d6e04?theme=light" frameBorder="0" width="100%" height="190px"></iframe>
        <a href="https://bknd.pro/podcast-files/030_backend_podcast.mp3">Скачать</a>
    </p>

    <p>
        <a href="../../index.html">К списку выпусков</a>
    </p>

    <h4>Ссылки выпуска:</h4>
    <p>
        <ul>
            <li><a href="https://go.dev/blog/survey2023-h2-results">https://go.dev/blog/survey2023-h2-results</a></li>
            <li><a href="https://github.com/zombiezen/go-sqlite">https://github.com/zombiezen/go-sqlite</a> (547 stars)</li>
            <li><a href="https://gitlab.com/cznic/sqlite">https://gitlab.com/cznic/sqlite</a> (360 stars)</li>
            <li><a href="https://github.com/dyu/ffi-overhead">https://github.com/dyu/ffi-overhead</a> (619 stars)</li>
            <li><a href="https://github.com/dyu/ffi-overhead/issues/16#issuecomment-1845541490">https://github.com/dyu/ffi-overhead/issues/16#issuecomment-1845541490</a></li>
        </ul>
    </p>

    <h4>Go Developer Survey 2023 H2</h4>

    <p>Размер организации:</p>
    <ul>
        <li>соло (8%)</li>
        <li>2-99 (36%)</li>
        <li>100-999 (25%)</li>
        <li>1000-9999 (16%)</li>
        <li>10000+ (11%)</li>
    </ul>

    <p>Вид бизнеса:</p>
    <ul>
        <li>технологии (50%)</li>
        <li>финансы (13%)</li>
        <li>медиа (7%)</li>
        <li>ритейл (6%)</li>
        <li>телеком (5%)</li>
        <li>здравоохранение (4%)</li>
        <li>логистика (3%)</li>
        <li>образование (2%)</li>
    </ul>

    <ol>
        <li>90% респондентов удовлетворены использованием Go.</li>
        <li>
            Доля пользователей Windows растет; особенно среди начинающий разработчиков.
            На первых местах по прежнему Linux (63%) и macOS (58%).
        </li>
        <li>Однако пальму первенства ожидаемо занимает Linux (96%) среди целевых ОС для деплоя.</li>
        <li>Самые популярные среды разработки: VS Code (44%), GoLand (31%) и Vim / Neovim (16%).</li>
        <li>
            Топ-3 облачные платформы: AWS (48%), GCP (29%), Microsoft Azure (14%).
            Последняя платформа популярная среди крупных компаний (>1000 сотрудников).
        </li>
        <li>
            Топ СУБД: PostgreSQL (59%), Redis (38%), MySQL (30%), sqlite (29%), MongoDB (22%), MariaDB (12%).
            Крупные компании используют cloud-specific СУБД.
        </li>
        <li>
            Пророчества, что protobuf заменит JSON пока не сбывается: JSON по прежнему крайне популярный формат данных (96%).
            Далее: YAML (54%), CSV (45%), Protocol buffers (44%), XML (21%), TOML (17%).
        </li>
        <li>
            Другие популярные технологии среди опрошенных:
            gRPC (47%), Terraform (26%), Apache Kafka (22%), ElasticSearch (21%), GraphQL (17%), RabbitMQ (17%).
        </li>
    </ol>

    <p>
        Особо акцентированные проблемы среди опрошенных - это структурирование проекта (54%) и лучшие практики (47%).
        Большинство разработчиков на Go при создании нового проекта начинают с нуля (37%),
        либо копируют базовую структуру проекта из похожего проекта (33%).
    </p>

    <blockquote>
        “Finding an appropriate structure and the right abstraction levels for a new project can be quite tedious;
        looking at high-profile community and enterprise projects for inspiration can be quite confusing as
        everyone structures their project differently”
        <span class="text-muted">— Professional Go developer w/ 5 – 9 years of Go experience</span>
    </blockquote>

    <p>
        Решение проблемы - предложение структуры проекта с примерами, подключением к СУБД, тестами.
    </p>

    <p>
        Обработка ошибок - по прежнему дебатируемая тема.
        Тут наблюдается некоторый раскол. Чуть больше половины (55%) удовлетворено обработкой ошибок в Go.
        Однако, значительная доля опрошенных считает обработку ошибок слишком многословной (43%).
        31% опрошенных предлагает рассмотреть упрощение, например, оператор ? в Rust (31%).
    </p>

    <p>
        ML/AI стремительно адаптируется сообществом для (список не полный):
    </p>

    <ol>
        <li>написания тестов (49%);</li>
        <li>автокомплита (47%);</li>
        <li>написания документации (36%);</li>
        <li>кодогенерации (20%);</li>
        <li>объяснения что делает код (18%);</li>
        <li>конвертация из других ЯП (15%).</li>
    </ol>

    <p>
        В этом году команда Go решила в опросе измерить как много опрошенных разработчиков использует <strong>микросервисы</strong>.
        Разработчики из больших компаний (>1000 сотрудников) преимущественно адаптируют микросервисную архитектуру.
        43% опрошенных ответили положительно. 28% применяют как микросервисную архитектуру, так и монолиты.
        21% работают над монолитами.
    </p>

    <p>
        Интересны результаты по количеству микросервисов.
        4% имеют всего один микросервис (мкрсв) в своем приложении.
        2-5 мкрсв у 40% опрошенных.
        6-10 мкрсв у 20%.
        10+ мкрсв у 37%.
        Мне очень хотелось бы узнать у разработчиков, у которых 10 и менее микросервисов почему они выбрали эту архитектуру.
    </p>

    <p>
        Самые большие проблемы (данные опроса) этой архитектуры - это
        тестирование, отладка (46%),
        инфрастуктура (38%),
        консистентность данных (30%).
    </p>

    <p>
        Чаще всего вместе в микросервисном решении помимо Go используют Python (33%), Node.js (28%), Java (26%).
        26% пишет только на Go.
    </p>

    <p>
        Модели коммуникации в микросервисной архитектуре (не полный список):
    </p>

    <ol>
        <li>request - response (RPC, HTTP, REST) (72%)</li>
        <li>очереди сообщений (14%)</li>
        <li>pub/sub (9%)</li>
        <li>GraphQL (2%)</li>
    </ol>

    <h4>go-sqlite</h4>

    <p>
        Вышла стабильная версия пакета <a href="https://github.com/zombiezen/go-sqlite">https://github.com/zombiezen/go-sqlite</a>
        для работы с SQLite3. Главная особенность пакета - нет зависимости от C, т.е. сборка без CGO.
        Это не единственный проект. Я знаю по крайней мере 3 таких.
        Однако, исторически сложилось так, что самый популярный - это <a href="https://github.com/mattn/go-sqlite3">https://github.com/mattn/go-sqlite3</a>.
        И это CGO пакет.
    </p>

    <p>Чем же плох CGO?</p>

    <ul>
        <li>нет кросс-компиляции;</li>
        <li>нужен установленный компилятор C;</li>
        <li>медленнее выполняется сборка (С to Go & Go to C код, вызывается C компилятор для каждого C файла);</li>
        <li>race детектор, pprof, coverage, fuzz testing не могут преодолеть барьер CGO;</li>
        <li>пониженная производительность;</li>
        <li>деплой сложнее</li>
    </ul>

    <p>
        До версии 1.21 Go еще и отличался очень медленным C FFI (foreign function interface) оверхедом.
        500 млн запросов к C функции в Go выполнялся медленнее других ЯП: 36 секунд.
        В Go 1.21 это время сократилось до 7 секунд, что все еще медленно по сравнению даже с java.
    </p>

    <h4>JetBrains предлагает AI Assistant</h4>

    <p>
        <a href="../../index.html">К списку выпусков</a>
    </p>
    <div id="footer">
        By <a href="https://bknd.pro">bknd.pro</a>
    </div>
</div>
</body>
</html>
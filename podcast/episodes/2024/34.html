<html lang="ru" xmlns="http://www.w3.org/1999/html">
<head>
    <title>Backend Podcast: 34. –í—ã—Å—Ç—Ä–µ–ª –≤ –Ω–æ–≥—É —Å PostgreSQL</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css">
</head>
<body>
<div class="container">
    üåê
    <a href="https://t.me/bkndpro">Telegram</a> /
    <a href="https://open.spotify.com/show/6G9K0DrOH2wsEqDKbed01e?si=oQXKuI4tQKqgJj894-2p_A">Spotify</a> /
    <a href="https://www.youtube.com/@ostrbor/videos">YouTube</a> /
    <a href="https://podcasts.google.com/feed/aHR0cHM6Ly9mZWVkcy5hY2FzdC5jb20vcHVibGljL3Nob3dzLzY0NzI3YzA3ZTY4OTk3MDAxMmZiMWMyMw">Google
        Podcasts</a> /
    <a href="https://music.amazon.com/podcasts/d797927c-7c90-4d4b-a845-3b61dc25060c/backend-podcast">Amazon Music</a> /
    <a href="https://www.podchaser.com/podcasts/backend-podcast-5356704">Podchaser</a> /
    <a href="https://www.jiosaavn.com/shows/backend-podcast/1/gcf017sumlQ_">Jiosaavn</a> /
    <a href="https://feeds.acast.com/public/shows/64727c07e689970012fb1c23">RSS</a>
    <br/>
    ‚ùì –ü–∏—Å–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã/–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å—é–¥–∞: <a href="mailto:OstretsovAA+podcast@gmail.com">OstretsovAA+podcast@gmail.com</a>
</div>
<main class="container">
    <hgroup>
        <h1>34. –í—ã—Å—Ç—Ä–µ–ª –≤ –Ω–æ–≥—É —Å PostgreSQL</h1>
        <h2>14.01.2024</h2>
    </hgroup>

    <p>
        <iframe src="https://embed.acast.com/64727c07e689970012fb1c23/65a445b1c181320016ad050d" frameBorder="0" width="100%" height="190px"></iframe>
        <a href="https://bknd.pro/podcast-files/034_backend_podcast.mp3">–°–∫–∞—á–∞—Ç—å</a>
    </p>

    <p>
        <a href="../../index.html">–ö —Å–ø–∏—Å–∫—É –≤—ã–ø—É—Å–∫–æ–≤</a>
    </p>

    <h4>–°—Å—ã–ª–∫–∏ –≤—ã–ø—É—Å–∫–∞:</h4>
    <ul>
        <li><a href="https://philbooth.me/blog/nine-ways-to-shoot-yourself-in-the-foot-with-postgresql">https://philbooth.me/blog/nine-ways-to-shoot-yourself-in-the-foot-with-postgresql</a></li>
        <li><a href="https://www.reddit.com/r/PostgreSQL/comments/12w574s/nine_ways_to_shoot_yourself_in_the_foot_with/">–û–±—Å—É–∂–¥–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ –§–∏–ª–∞ –Ω–∞ reddit</a></li>
        <li><a href="https://www.youtube.com/watch?v=pJWCwfv983Q">–¢—Ä–∏ —Ç–∏–ø–∞ JOIN'–æ–≤: https://www.youtube.com/watch?v=pJWCwfv983Q</a></li>
        <li><a href="https://github.com/tcdi/plrust">PL/Rust –¥–ª—è PostgreSQL: https://github.com/tcdi/plrust</a> (997 stars)</li>
        <li><a href="https://github.com/citusdata/pg_cron">pg_cron: https://github.com/citusdata/pg_cron</a> (2.4 stars)</li>
        <li><a href="https://www.postgresql.eu/events/pgconfeu2022/sessions/session/3902/slides/354/CTEsAndTheirMaterialization-DivyaSharma.pdf">–°–ª–∞–π–¥—ã —Å –¥–æ–∫–ª–∞–¥–∞ –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ CTE</a> (AWS, 2022)</li>
    </ul>

    –í —ç—Ç–æ–º –≤—ã–ø—É—Å–∫–µ –º—ã –æ–±—Å—É–¥–∏–º <a href="https://philbooth.me/blog/nine-ways-to-shoot-yourself-in-the-foot-with-postgresql">—Å—Ç–∞—Ç—å—é</a> –§–∏–ª–∞ –ë—É—Ç–∞ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º:
    <h4>9 —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã—Å—Ç—Ä–µ–ª–∏—Ç—å —Å–µ–±–µ –≤ –Ω–æ–≥—É —Å PostgreSQL</h4>

    <p>
        –ü–æ–ø—Ä–æ–±—É–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–æ–≥–ª–∞—Å–∏—Ç—Å—è –∏–ª–∏ –Ω–µ —Å–æ–≥–ª–∞—Å–∏—Ç—Å—è —Å –∞–≤—Ç–æ—Ä–æ–º.
    </p>

    <h5>1. –û—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ <code>work_mem</code> –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.</h5>

    <p>
        <code>work_mem</code> - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ø–∞–º—è—Ç–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.
        –ï—Å–ª–∏ –º—ã –¥–µ–ª–∞–µ–º JOIN—ã (hash/merge join), CTE –∏–ª–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, —Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ <code>work_mem</code> –≤–∞–∂–Ω–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.
        –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ: <code>SHOW work_mem;</code>.
        –î–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º: <code>SET [ SESSION | LOCAL ] work_mem TO '16MB';</code>.
        <code>SET SESSION</code> —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏, <code>LOCAL</code> –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
    </p>

    <p>
        –ù–æ –∫–∞–∫ –ø–æ–Ω—è—Ç—å –∫–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–ª—è <code>work_mem</code>?
        –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—ã–≤–æ–¥ <code>EXPLAIN (ANALYSE, BUFFERS)</code>:
        –µ—Å–ª–∏ –±—É–¥–µ—Ç hash join, —Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä hash-—Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –º–µ—Ä–∂–∞ (–Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å "Memory usage").
        –¢–∞–∫, –æ–ø—ã—Ç–Ω—ã–º –ø—É—Ç–µ–º —Å—Ç–∞–Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö 4–ú–± –∏–ª–∏ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å.
    </p>

    <p>
        –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ 4–ú–± - —ç—Ç–æ –≤–ø–æ–ª–Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞.
        –¢.–µ. –º–æ–∂–Ω–æ –≤–ø–æ–ª–Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Å —ç—Ç–∏–º –¥–µ—Ñ–æ–ª—Ç–æ–º.
        –í–∞–∂–Ω–æ –Ω–µ —É–ø—É—Å–∫–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞ –º–µ–¥–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏, –≤ —á–µ–º –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, pgBadger.
    </p>

    <h5>2. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã.</h5>

    <p>
        –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –≤–ø–æ–ª–Ω–µ —Å–µ–±–µ –Ω–µ–ø–ª–æ—Ö–∞—è –∏–¥–µ—è.
        –Ø –¥–∞–∂–µ —Ä–∞–±–æ—Ç–∞–ª —Å –±–∏–ª–ª–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–æ–π –≤ —Ç–µ–ª–µ–∫–æ–º–µ, –≥–¥–µ –Ω–∞ —Ö—Ä–∞–Ω–∏–º—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö –±—ã–ª–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ —á—É—Ç—å –±–æ–ª—å—à–µ —á–µ–º –≤—Å–µ.
        –¢–∞–∫–∂–µ —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –Ø–ü –≤—Ä–æ–¥–µ Python 3, TCL, Perl, –Ω–æ –∏ –Ω–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä,
        <a href="https://github.com/tcdi/plrust">Rust</a>.
    </p>

    <p>
        –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –Ω–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∏–∑–¥–µ—Ä–∂–µ–∫. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫: –º–µ–Ω—å—à–∞—è –≥–∏–±–∫–æ—Å—Ç—å (–≤ –∫–æ–¥–µ –≤–Ω–µ—Å—Ç–∏ –ø—Ä–∞–≤–∫–∏ –ø—Ä–æ—â–µ),
        –ø—Ä–æ–±–ª–µ–º—ã —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–µ—Å–ª–∏ –Ω–∞–¥–æ, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∞ –∫–∞–∫ —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞, —Ç–∞–∫ –∏ –Ω–æ–≤–∞—è).
    </p>

    <p>
        –í —ç—Ç–æ–º –≤–æ–ø—Ä–æ—Å–µ —è —Ä–∞—Å—Ö–æ–∂—É—Å—å —Å –º–Ω–µ–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∞.
        –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã - –æ—Ç–ª–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏—Å—å –≤ –ø–æ—Ä—É –Ω–∞ –æ—Ä–ø–µ–¥–µ–ª–µ–Ω–Ω–æ–º —ç—Ç–∞–ø–µ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞.
    </p>

    <h5>3. –û—á–µ–Ω—å –º–Ω–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤.</h5>

    <p>
        –ù–∞—á–∏–Ω–∞–µ–º —Å –ø—Ä–æ—Å—Ç—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (constraints): CHECK, NOT NULL, UNIQUE, PK, FK, EXCLUDE.
        –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞–ª—å–∫—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–ª–æ–Ω–∫—É, —Ç–æ –ª—É—á—à–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ (GENERATED COLUMNS) –∏–ª–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö, –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö,
        —Ç–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º (MATERIALIZED VIEWS).
        –ö—Å—Ç–∞—Ç–∏, –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é REFRESH –∏ –¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤ —Å–∞–º–æ–º PostgreSQL
        —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è <a href="https://github.com/citusdata/pg_cron">pg_cron</a>.
        –ï—Å–ª–∏ —ç—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏—Å—á–µ—Ä–ø–∞–Ω—ã, –∞ —Ü–µ–ª—å –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞, —Ç–æ –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã.
        –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –Ω–∞–¥–æ —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ–≥–¥–∞ —Ä–µ—á—å –∏–¥–µ—Ç –æ –¥—Ä—É–≥–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö.
    </p>

    <p>
        –¢—Ä–∏–≥–≥–µ—Ä—ã –Ω–µ —Å—Ç–æ–∏—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ –º–æ–¥–µ–ª—å —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
        –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ —Å—Ç–æ–∏—Ç –ª–æ–≥–≥–∏—Ä–æ–≤–∞—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É –∏–∑ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–∞–∫—É—é-—Ç–æ —Ç–∞–±–ª–∏—Ü—É.
        –õ—É—á—à–µ –ø—Ä–µ–¥–ø–æ—á–µ—Å—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø "—è–≤–Ω–æ–µ –ª—É—á—à–µ –Ω–µ—è–≤–Ω–æ–≥–æ" –∏ –ø–∏—Å–∞—Ç—å —è–≤–Ω–æ –ª–æ–≥-—Ç–∞–±–ª–∏—Ü—É –≤ —Å–æ—Å–µ–¥–Ω–µ–º –∑–∞–ø—Ä–æ—Å–µ.
    </p>

    <h5>4. –ê–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NOTIFY.</h5>

    <p>
        –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ–æ–±—â–∏—Ç—å –æ–± —É—Å–ø–µ—à–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>NOTIFY</code>.
        –≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —Ö–æ—Ä–æ—à–æ —Ç–µ–º, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ.
        –í—Å–µ —Å–ª—É—à–∞—é—â–∏–µ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–æ–∫—É.
        –°—Ç—Ä–æ–∫—É –º–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –≤ –≤–∏–¥–µ JSON-–æ–±—ä–µ–∫—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è <code>row_to_json</code> —Ñ—É–Ω–∫—Ü–∏—é.
    </p>

    <p>
        –ü—Ä–æ–±–ª–µ–º–∞ —Å —ç—Ç–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –≤ —Ç–æ–º, —á—Ç–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω—É–∂–Ω–æ –≥–¥–µ-—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å payload —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ —Å–ª—É—á–∞–π,
        –µ—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-–ª–∏–±–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ –±—ã–ª–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª—É—à–∞—Ç–µ–ª—è (LISTEN).
        –Ø –ø–æ—Å—Ç—É–ø–∞—é —Ç–∞–∫: –¥–µ–ª–∞—é –æ—á–µ—Ä–µ–¥—å –ø—Ä—è–º–æ —Ç—É—Ç, –≤ PostgreSQL (–µ—Å–ª–∏ —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è) –∏ –≤ –¥–æ–±–∞–≤–æ–∫,
        –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è, –¥–æ–±–∞–≤–ª—è—é NOTIFY.
    </p>

    <p>
        –î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç—É—é —Ç–∞–±–ª–∏—á–∫—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø–æ –∫—Ä–æ–Ω—É –≤—ã–±–∏—Ä–∞–µ–º –∑–∞–¥–∞—á–∏.
        –ù–µ –∑–∞–±—ã–≤–∞–µ–º, —á—Ç–æ –≤—ã–±–æ—Ä–∫–∞ –º–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—Å—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è, –ø–æ—ç—Ç–æ–º—É –ø–æ–ª–µ–∑–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ SELECT-–∑–∞–ø—Ä–æ—Å–µ
        <code>FOR UPDATE SKIP LOCKED</code>.
    </p>

    <h5>5. –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å EXPLAIN ANALYZE.</h5>

    <p>
        –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–µ–Ω, —á—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫—Ä–∞–π–Ω–µ –ø–æ–ª–µ–∑–Ω—ã–π.
        –ß–µ–º –±–æ–ª—å—à–µ –∏ —Å–ª–æ–∂–Ω–µ–µ –ø—Ä–æ–µ–∫—Ç, —Ç–µ–º —á–∞—â–µ –Ω—É–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–∏ –∑–∞–ø—Ä–æ—Å—ã —Å –ø–æ–º–æ—â—å—é <code>EXPLAIN ANALYZE</code>.
        –¢–∞–º –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∫–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, —Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç—Å—è –ø–∞–º—è—Ç–∏, –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∏ —Ç.–¥.
        –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏–±–µ–≥–∞—Ç—å –∫ EXPLAIN –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–æ–ª—å—à–∏–º —Ç–∞–±–ª–∏—Ü–∞–º –∏–ª–∏ –ø—Ä–∏ —Å–ª–∏—è–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü (JOIN).
    </p>

    <h5>6. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å CTE, –∞ –Ω–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã.</h5>

    <p>
        –ß–µ–º —Ö–æ—Ä–æ—à–∏ CTE? –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å (–∏ —Ä–µ–∫—É—Ä—Å–∏–∏; —Å –Ω–∏–º–∏ —É –º–µ–Ω—è –æ—á–µ–Ω—å –º–∞–ª–æ –æ–ø—ã—Ç–∞)!
        –û—Å–æ–±–µ–Ω–Ω–æ —ç—Ç–æ —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ —É –≤–∞—Å –µ—Å—Ç—å —Å–µ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, –≥–¥–µ –æ–¥–∏–Ω –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ.
    </p>

    <p>
        –ò—Ç–∞–∫, –¥–æ 12 –≤–µ—Ä—Å–∏–∏ PostgreSQL, –≤—Å–µ CTE –±—ã–ª–∏ MATERIALIZED.
        –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤—Ä–æ–¥–µ –∫–∞–∫ —Ç–∞–±–ª–∏—Ü–∞,
        —É –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –Ω–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –ª—é–±—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ–∑–Ω–∞—á–∞–ª–∞ <code>Seq Scan</code> –≤ EXPLAIN.
        –° 12 –≤–µ—Ä—Å–∏–∏ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å—Ç–∞–ª–∏ NOT MATERIALIZED.
        –¢.–µ. –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–æ—Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å CTE –≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å, —Ç–æ –æ–Ω —ç—Ç–æ —Å–¥–µ–ª–∞–µ—Ç.
    </p>

    <p>
        <code>work_mem</code> –∏ —Ç—É—Ç –æ —Å–µ–±–µ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç!
        –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã CTE —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ —Ä–∞–∑ –≤ —ç—Ç–æ–π –ø–∞–º—è—Ç–∏.
    </p>

    <p>
        –ò—Ç–æ–≥–æ, –º–æ–∂–Ω–æ –≤–ø–æ–ª–Ω–µ —Å–ø–æ–∫–æ–π–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CTE.
        –ù–µ –∑–∞–±—ã–≤–∞–µ–º –ø—Ä–æ –ø. 5 –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.
    </p>

    <h5>7. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö CTE.</h5>

    <p>
        –í—Å–µ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∫—É—Ä—Å–∏–∏ –≤ –°–£–ë–î —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ç–∞–∫, —á—Ç–æ–±—ã —Ä–µ–∫—É—Ä—Å–∏—è –Ω–µ –±—ã–ª–∞ –Ω—É–∂–Ω–∞.
        –í —Å–ª—É—á–∞–µ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –µ—Å—Ç—å nested set –∏–ª–∏ –ø–æ–ª–Ω–∞—è –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞.
        –î–∞, –≤–æ –≤—Ç–æ—Ä–æ–º —Å–ª—É—á–∞–µ –¥–æ–ª–≥–∞—è –∑–∞–ø–∏—Å—å, –Ω–æ –∑–∞—Ç–æ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–µ —á—Ç–µ–Ω–∏–µ!
    </p>

    <h5>8. –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∫ FK.</h5>

    <p>
        –í MySQL –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–æ–ª–æ–Ω–∫–∏, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è FK. –í PostgreSQL —ç—Ç–æ –Ω–µ —Ç–∞–∫.
        –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ –∫–∞–∂–¥—ã–π JOIN –ø–æ FK —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É–¥–∞—Ä–æ–º –ø–æ —Ä–µ—Å—É—Ä—Å–∞–º.
        –ù–µ –∑–∞–±—ã–≤–∞–µ–º, —á—Ç–æ –¥–∞–∂–µ –µ—Å–ª–∏ –º—ã –Ω–µ –¥–µ–ª–∞–µ–º JOIN –ø–æ FK,
        –Ω–æ —É –Ω–∞—Å –µ—Å—Ç—å –∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ FK (ON DELETE, ON UPDATE) —Ç–æ –∏–Ω–¥–µ–∫—Å—ã —Ç–æ–∂–µ –Ω—É–∂–Ω—ã!
        –ï—Å–ª–∏ –Ω–µ –ø—Ä–µ–Ω–µ–±—Ä–µ–≥–∞—Ç—å EXPLAIN, —Ç–æ –≤—ã —Ç–æ—á–Ω–æ –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–¥–µ–∫—Å–∞.
    </p>

    <h5>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</h5>

    <p>
        –û—Ç —Å–µ–±—è —è –µ—â–µ –¥–æ–±–∞–≤–ª—é, —á—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª <strong>–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å PostgreSQL</strong> –¥–æ –±–æ–ª–µ–µ —Å–≤–µ–∂–∏—Ö –≤–µ—Ä—Å–∏–π.
        –ö–∞–∫ –∏ —Å–æ –≤—Å–µ–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ —Ç–æ—Ä–æ–ø–∏—Ç—å—Å—è –Ω–µ —Å—Ç–æ–∏—Ç.
        –í –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ —É–ª—É—á—à–∞–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —É–ª—É—á—à–∞–µ—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ —Ç.–¥.
    </p>
</main>
</body>
</html>